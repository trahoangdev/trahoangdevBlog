---
title: 'Docker - Containerization Cơ Bản'
date: '2025-11-25'
tags: ['docker', 'devops', 'container']
draft: false
summary: 'Tìm hiểu về Docker và cách sử dụng container để triển khai ứng dụng một cách hiệu quả.'
---

## Docker Là Gì?

Docker là một nền tảng mã nguồn mở giúp đóng gói ứng dụng và các dependencies vào các container. Container giúp ứng dụng chạy nhất quán trên mọi môi trường.

## Lợi Ích Của Docker

- **Tính nhất quán**: Ứng dụng chạy giống nhau trên dev, test và production
- **Nhẹ**: Container chia sẻ kernel của OS, tiết kiệm tài nguyên
- **Nhanh**: Khởi động container chỉ mất vài giây
- **Dễ quản lý**: Dễ dàng scale và deploy ứng dụng

## Các Khái Niệm Cơ Bản

### Image

Image là template chỉ đọc chứa mọi thứ cần thiết để chạy ứng dụng.

```bash
# Pull image từ Docker Hub
docker pull nginx:latest

# Liệt kê images
docker images
```

### Container

Container là instance đang chạy của một image.

```bash
# Chạy container
docker run -d -p 8080:80 --name my-nginx nginx

# Liệt kê containers đang chạy
docker ps

# Dừng container
docker stop my-nginx

# Xóa container
docker rm my-nginx
```

## Dockerfile

Dockerfile là file chứa các lệnh để build image.

```dockerfile
# Sử dụng base image
FROM node:18-alpine

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy source code
COPY . .

# Expose port
EXPOSE 3000

# Start command
CMD ["npm", "start"]
```

## Build và Run

```bash
# Build image từ Dockerfile
docker build -t my-app:1.0 .

# Run container từ image vừa build
docker run -d -p 3000:3000 --name my-app-container my-app:1.0

# Xem logs
docker logs my-app-container

# Exec vào container
docker exec -it my-app-container sh
```

## Docker Compose

Docker Compose giúp quản lý nhiều container cùng lúc.

```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - '3000:3000'
    environment:
      - NODE_ENV=production
    depends_on:
      - db

  db:
    image: postgres:15
    environment:
      - POSTGRES_PASSWORD=secret
    volumes:
      - db-data:/var/lib/postgresql/data

volumes:
  db-data:
```

```bash
# Start tất cả services
docker-compose up -d

# Stop tất cả services
docker-compose down
```

## Best Practices

1. **Sử dụng .dockerignore**: Loại bỏ files không cần thiết
2. **Multi-stage builds**: Giảm kích thước image
3. **Sử dụng specific tags**: Tránh dùng `latest`
4. **Minimize layers**: Gộp các RUN commands
5. **Security**: Không chạy container với root user

```dockerfile
# Multi-stage build example
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

FROM node:18-alpine
WORKDIR /app
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/node_modules ./node_modules
USER node
CMD ["node", "dist/index.js"]
```

## Kết Luận

Docker là công cụ quan trọng trong DevOps hiện đại. Việc nắm vững Docker giúp bạn triển khai và quản lý ứng dụng hiệu quả hơn.
